---
# Outpatient (OP) data validation rules

rules:
# ðŸ”‘ ATTENDKEY HES Record Identifier (primary key)
- name: ATTENDKEY is required
  expr: '!is.na(ATTENDKEY)'
  meta:
    severity: error
  
- name: ATTENDKEY is unique
  expr: is_unique(ATTENDKEY)
  meta:
    severity: error

- name: ATTENDKEY 12n 
  description: ATTENDKEY has 12 integers (2003-04 to 2020-21)
  expr: grepl("^\\d{12}$", ATTENDKEY)

- name: ATTENDKEY 19n
  description: ATTENDKEY has 19 integers (2021-22 onwards)
  expr: grepl("^\\d{19}$", ATTENDKEY)
...
